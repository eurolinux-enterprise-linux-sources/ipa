From fc67949f4ec91b304c9821fe18be1bad0e687183 Mon Sep 17 00:00:00 2001
From: Jan Cholasta <jcholast@redhat.com>
Date: Tue, 10 Dec 2013 16:32:08 +0100
Subject: [PATCH 110/116] Prevent garbage from readline on standard output of
 dogtag-ipa-retrieve-agent.

https://fedorahosted.org/freeipa/ticket/4064
---
 install/certmonger/dogtag-ipa-retrieve-agent-submit | 4 ++++
 1 file changed, 4 insertions(+)

diff --git a/install/certmonger/dogtag-ipa-retrieve-agent-submit b/install/certmonger/dogtag-ipa-retrieve-agent-submit
index 6d54000d6ec15b89557af144fe1d72c14c3128ac..f7e66c4fe354159f08649874db9460f3cc7e6f91 100644
--- a/install/certmonger/dogtag-ipa-retrieve-agent-submit
+++ b/install/certmonger/dogtag-ipa-retrieve-agent-submit
@@ -23,6 +23,10 @@
 # retrieve the updated certificate from IPA.
 
 import os
+# Prevent garbage from readline on standard output
+# (see https://fedorahosted.org/freeipa/ticket/4064)
+if not os.isatty(1):
+    os.environ['TERM'] = 'dumb'
 import sys
 import shutil
 import tempfile
-- 
1.9.3

