From 91498068dcc51dda06eef75b420506274b84133c Mon Sep 17 00:00:00 2001
From: Martin Babinsky <mbabinsk@redhat.com>
Date: Fri, 30 Jan 2015 14:24:15 +0100
Subject: [PATCH] ipa-client-install: put eol character after the last line of
 altered config file(s)

https://fedorahosted.org/freeipa/ticket/4864

Reviewed-By: Martin Basti <mbasti@redhat.com>
---
 ipa-client/ipaclient/ipachangeconf.py | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/ipa-client/ipaclient/ipachangeconf.py b/ipa-client/ipaclient/ipachangeconf.py
index bdc5579fccd82193e837b5e86cbc694c2619317c..42f6496e09404ab2d995f4ec91646f5c710ce723 100644
--- a/ipa-client/ipaclient/ipachangeconf.py
+++ b/ipa-client/ipaclient/ipachangeconf.py
@@ -190,6 +190,9 @@ class IPAChangeConf:
                 continue
             raise SyntaxError('Unknown type: [%s]' % o['type'])
 
+        # append an empty string to the output so that we add eol to the end
+        # of the file contents in a single join()
+        output.append('')
         return self.deol.join(output)
 
     def parseLine(self, line):
-- 
2.1.0

